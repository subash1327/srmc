<!doctype html>
<html lang="en">

<head>
  <title>SRMMC</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/hung1001/font-awesome-pro@4cac1a6/css/all.css" />
  <link rel="stylesheet" href="styles.css" />

  <style>
    #participants-area {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      width: 100%;
      height: 92%;
    }

    .participant {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    @media (max-width: 768px) {
      #participants-area {
        grid-template-columns: 1fr;
        /* Changes to single-column layout */
      }
    }
  </style>
</head>

<body>
  <div class="app-container">
    <div class="app-main">
      <div id="participants-area" style="height: 92%;width: 100%;">

      </div>
      <div class="video-call-actions">
        <button class="video-action-button mic" onclick="appActions.toggleAudio()">
          <i id="micIcon" class="fa fa-microphone"></i>
        </button>

        <!-- Camera button -->
        <button class="video-action-button camera" onclick="appActions.toggleVideo()">
          <i id="cameraIcon" class="fa fa-video"></i>
        </button>
        <!-- <button class="video-action-button maximize"></button> -->
        <!-- <button class="video-action-button endcall"
          onclick="appActions.disconnectRoom()"
          >Leave</button> -->

      </div>
    </div>
    <button class="expand-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="feather feather-message-circle">
        <path
          d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" />
      </svg>
    </button>
    <div class="container" style="width: 0px; opacity: 0;">
      <div class="row">
        <div class="col-md-8">
          <h2>Livekit Sample App</h2>
          <br />
          <div id="connect-area">
            <div>
              <b>LiveKit URL</b>
            </div>
            <div>
              <input type="text" class="form-control" id="url" value="ws://localhost:7880" />
            </div>
            <div>
              <b>Token</b>
            </div>
            <div>
              <input type="text" class="form-control" id="token" />
            </div>
            <div>
              <b>E2EE key</b>
            </div>
            <div>
              <input type="text" class="form-control" id="crypto-key" />
            </div>
          </div>

          <div id="options-area">
            <div>
              <input type="checkbox" class="form-check-input" id="publish-option" checked />
              <label for="publish-option" class="form-check-label"> Publish </label>
            </div>
            <div>
              <input type="checkbox" class="form-check-input" id="simulcast" checked />
              <label for="simulcast" class="form-check-label"> Simulcast </label>
            </div>
            <div>
              <input type="checkbox" class="form-check-input" id="dynacast" checked />
              <label for="dynacast" class="form-check-label"> Dynacast </label>
            </div>
            <div>
              <input type="checkbox" class="form-check-input" id="adaptive-stream" checked />
              <label for="adaptive-stream" class="form-check-label"> AdaptiveStream </label>
            </div>
            <div>
              <input type="checkbox" class="form-check-input" id="force-turn" />
              <label for="force-turn" class="form-check-label"> Force TURN </label>
            </div>
            <div>
              <input type="checkbox" class="form-check-input" id="auto-subscribe" checked />
              <label for="auto-subscribe" class="form-check-label"> Auto Subscribe </label>
            </div>
            <div>
              <input type="checkbox" class="form-check-input" id="e2ee" />
              <label for="e2ee" class="form-check-label"> E2E Encryption </label>
            </div>
            <div>
              <select id="preferred-codec" class="custom-select" style="width: auto"></select>
            </div>
            <div>
              <select id="scalability-mode" class="custom-select" style="width: auto" disabled="true"></select>
            </div>
          </div>

          <div id="actions-area">
            <div>
              <button id="connect-button" class="btn btn-primary mt-1" type="button"
                onclick="appActions.connectWithFormInput()">
                Connect
              </button>
            </div>
            <div>
              <button id="toggle-audio-button" class="btn btn-secondary mt-1" disabled type="button"
                onclick="appActions.toggleAudio()">
                Enable Mic
              </button>
              <button id="toggle-video-button" class="btn btn-secondary mt-1" disabled type="button"
                onclick="appActions.toggleVideo()">
                Enable Camera
              </button>
              <button id="flip-video-button" class="btn btn-secondary mt-1" disabled type="button"
                onclick="appActions.flipVideo()">
                Flip Camera
              </button>
              <button id="share-screen-button" class="btn btn-secondary mt-1" disabled type="button"
                onclick="appActions.shareScreen()">
                Share Screen
              </button>
              <button id="toggle-pip-button" class="btn btn-secondary mt-1" disabled type="button"
                onclick="appActions.togglePiP()">
                Open PiP
              </button>
              <button id="toggle-e2ee-button" class="btn btn-secondary mt-1" disabled type="button"
                onclick="appActions.toggleE2EE()">
                Enable E2EE
              </button>
              <button id="e2ee-ratchet-button" class="btn btn-secondary mt-1" disabled type="button"
                onclick="appActions.ratchetE2EEKey()">
                Ratchet Key
              </button>
              <input id="file" type="file" />
              <button onclick="appActions.sendFile()">Send file</button>
              <select id="simulate-scenario" class="custom-select" style="width: auto"
                onchange="appActions.handleScenario(event)">
                <option value="" selected>Simulate</option>
                <option value="signal-reconnect">Signal reconnect</option>
                <option value="full-reconnect">Full reconnect</option>
                <option value="resume-reconnect">Resume reconnect</option>
                <option value="disconnect-signal-on-resume">Signal disconnect on resume</option>
                <option value="disconnect-signal-on-resume-no-messages">
                  Signal disconnect on resume no msgs
                </option>
                <option value="speaker">Speaker update</option>
                <option value="node-failure">Node failure</option>
                <option value="server-leave">Server booted</option>
                <option value="migration">Migration</option>
                <option value="force-tcp">Force TCP</option>
                <option value="force-tls">Force TURN/TLS</option>
                <option value="subscribe-all">Subscribe all</option>
                <option value="unsubscribe-all">Unsubscribe all</option>
                <option value="leave-full-reconnect">Leave Request Full Reconnect</option>
              </select>
              <button id="disconnect-room-button" class="btn btn-danger mt-1" disabled type="button"
                onclick="appActions.disconnectRoom()">
                Disconnect
              </button>
              <button id="start-audio-button" class="btn btn-secondary mt-1" disabled type="button"
                onclick="appActions.startAudio()">
                Start Audio
              </button>
              <select id="preferred-quality" class="custom-select" style="width: auto"
                onchange="appActions.handlePreferredQuality(event)">
                <option value="" selected>PreferredQuality</option>
                <option value="high">high</option>
                <option value="medium">medium</option>
                <option value="low">low</option>
              </select>
              <select id="preferred-fps" class="custom-select" style="width: auto"
                onchange="appActions.handlePreferredFPS(event)">
                <option value="" selected>PreferredFPS</option>
                <option value="30">30</option>
                <option value="15">15</option>
                <option value="8">8</option>
              </select>
            </div>
          </div>

          <div id="inputs-area">
            <div>
              <select id="video-input" class="custom-select" onchange="appActions.handleDeviceSelected(event)">
                <option selected>Video Input (default)</option>
              </select>
            </div>
            <div>
              <select id="audio-input" class="custom-select" onchange="appActions.handleDeviceSelected(event)">
                <option selected>Audio Input (default)</option>
              </select>
            </div>
            <div>
              <select id="audio-output" class="custom-select" onchange="appActions.handleDeviceSelected(event)">
                <option selected>Audio Output (default)</option>
              </select>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <h3>Chat</h3>
          <div id="chat-area">
            <textarea class="form-control" id="chat" rows="9"></textarea>
            <div id="chat-input-area">
              <div>
                <input type="text" class="form-control" id="entry" placeholder="Type your message here" />
              </div>
              <div>
                <button id="send-button" class="btn btn-primary" type="button" onclick="appActions.enterText()"
                  disabled>
                  Send
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="screenshare-area">
        <div>
          <span id="screenshare-info"> </span>
          <span id="screenshare-resolution"> </span>
        </div>
        <video id="screenshare-video" autoplay playsinline></video>
      </div>

      <!-- <div id="participants-area"></div> -->

      <div id="log-area">
        <textarea id="log"></textarea>
      </div>
    </div>
  </div>

  <script src="./demo.ts" type="module"></script>
  <!-- for icons -->
  <script src="https://kit.fontawesome.com/7c1c4c7e9c.js" crossorigin="anonymous"></script>
</body>

</html>